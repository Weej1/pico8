pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
local angle=0

function lerp(a,b,t)
	return a*(1-t)+b*t
end

function _update()
 angle+=0.01
 --angle=0.25
end

function _draw()
	cls(1)
	palt(0,false)
	palt(14,true)
	print3d(48,0,57,32,64,angle)
 	
	palt()
	print(stat(1),2,2,7)
end

-->8
function print3d(sx,sy,sw,sh,y,angle)
	local cc,ss=cos(angle),-sin(angle)
	local z0,z1=2+cc,2-cc
	-- projection
 local y0,y1,w0,w1=-sh*ss/z0,sh*ss/z1,sw/z0,sw/z1
 if(y0>y1)y0,y1,w0,w1=y1,y0,w1,w0
 local len=y1-y0
 -- perspective correct mapping
 local du,dw=sh*w1/len,(w1-w0)/len

	local cy0=ceil(y0)
	sy+=(cy0-y0)*du
	w0+=(cy0-y0)*dw
 for y=y+cy0,y+ceil(y1)-1 do
 	sspr(sx,sy/w0,sw,1,63.5-w0,y,2*w0,1)
  sy+=du
  w0+=dw
 end
end
__gfx__
eee00eeeeeeeeeeeeeeee0000eeeeeeeeeeeee0000eeeeeeeeeee0000eee0eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
e00770eeeeeeeeeeeeee077770eeeeeeeeeee077770eeeeeeeee0777700070eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
077770eeeeeeeeeeeee07777770eeeeeeeee07007770eeeeeee07700007770eeeee00000eeeeeee00ee00e0000eeeeeee00000eeeeeeeeeeeeeeeeeeeeeeeeee
000770eeeeeeeeeeee0770007770eeeeeee070ee0770eeeeee0700eeee0770eeee07777700eeee0770077077770eeeee0777770eeeeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeee070eee0770eeeeeeee0eee0770eeeee0770eeeeee070eee0700007770ee077777777007770eee070007770eeeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeee0eeee0770eeeeeeeeeee0070eeeeee070eeeeeeee0eee0770eee0770eee077000770e0770ee070eee0770eeeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeeeeeee0770eeeeeeeeee07700eeeee0770eeeee000000e0770eee0770eee0770e0770e0770e077000007770eeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeeeeeee070eeeeeeeeee0777770eeee0770eeee07777770e00e0007770eee0770e0770e0770e077777777770eeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeeeeee070eeeeeeeeeeee007770eeee0770eeeee007700eee007770770eee0770e0770e0770e07700000000eeeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeeeeee070eeeeeeeeeeeeee07770eee0770eeeeee0770eee0777000770eee0770e0770e0770e0770eeeeee0eeeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeeeee070eeeeeeeeeeeeeeee0770eee0770eeeeee0770ee07700ee0770eee0770e0770e0770e0770eeeee070eeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeeee070eee0eeeeeeeeeeeee0770eeee0770eeeee0770ee0770eee0770eee0770e0770e0770e07770eeee070eeeeeeeeeeeeeeeeeeeeeee
ee0770eeeeeeeeeeeeee070000070eeeeeee00eee070eeeee07770eeee0770ee0770eee07700ee0770e0770e0770ee0777000070eeeeeeeeeeeeeeeeeeeeeeee
e007700eeeeeeeeeeee0777777770eeeeee077000770eeeeee077700007770ee0777000777070e0770e0770e0770eee077777770eeeeeeeeeeeeeeeeeeeeeeee
07777770eeeeeeeeee0777777770eeeeeee07777700eeeeeeee0077777700eeee07777707770e0777707770077770eee0777700eeeeeeeeeeeeeeeeeeeeeeeee
00000000eeeeeeeeee000000000eeeeeeeee00000eeeeeeeeeeee000000eeeeeee00000e000ee000000000ee0000eeeee0000eeeeeeeeeeeeeeeeeeeeeeeeeee
eeeee0000eee0eeeeeeee00000eeeeeeeeeeee00eeeeeeeeeeeee00000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00eeeeeeeeeeeeeeeeeeeeeeee
eeee0777700070eeeee007777700eeeeeeeee0770eeeeeeeeee007777700eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0770eeeeeeeeeeeeeeeeeeeeeee
eee07700007770eeee07700000770eeeeeeee0770eeeeeeeee07700000770eee00000eee0000eeeee00000eeeeee00ee000ee0770eeeeeeeeeeeeeeeeeeeeeee
ee0700eeee0770eee0770eeeee0770eeeeeee0770eeeeeeee0770eeeee0770e0777770e077770eee0777770eee0077007770e0770eeeeeeeeeeeeeeeeeeeeeee
e0770eeeeee070eee0770eeeee0770eeeeeee0770eeeeeeee0770eeeee0770ee07770eee0700eee070007770e07777770770e0770eeeeeeeeeeeeeeeeeeeeeee
e070eeeeeeee0eee0770eeeeeee0770eeeeee0770eeeeeee0770eeeeeee0770ee0770eee070eee070eee0770ee007700e00ee0770eeeeeeeeeeeeeeeeeeeeeee
0770eeeee000000e0770eeeeeee0770eeeeee0770eeeeeee0770eeeeeee0770ee0770eee070ee077000007770ee0770eeeeee0770eeeeeeeeeeeeeeeeeeeeeee
0770eeee077777700770eeeeeee0770eeeeee070eeeeeeee0770eeeeeee0770eee0770e070eee077777777770ee0770eeeeee070eeeeeeeeeeeeeeeeeeeeeeee
0770eeeee007700e0770eeeeeee0770eeeeee070eeeeeeee0770eeeeeee0770eee0770e070eee07700000000eee0770eeeeee070eeeeeeeeeeeeeeeeeeeeeeee
0770eeeeee0770ee0770eeeeeee0770eeeeee070eeeeeeee0770eeeeeee0770eee0770070eeee0770eeeeee0eee0770eeeeee070eeeeeeeeeeeeeeeeeeeeeeee
0770eeeeee0770ee0770eeeeeee0770eeeeee070eeeeeeee0770eeeeeee0770eeee077070eeee0770eeeee070ee0770eeeeee070eeeeeeeeeeeeeeeeeeeeeeee
e0770eeeee0770eee0770eeeee0770eeeeeeee0eeeeeeeeee0770eeeee0770eeeee077070eeee07770eeee070ee0770eeeeeee0eeeeeeeeeeeeeeeeeeeeeeeee
e07770eeee0770eee0770eeeee0770eeeeeeee00eeeeeeeee0770eeeee0770eeeeee0770eeeeee0777000070eee0770eeeeeee00eeeeeeeeeeeeeeeeeeeeeeee
ee077700007770eeee07700000770eeeeeeee0770eeeeeeeee07700000770eeeeeee0770eeeeeee077777770ee007700eeeee0770eeeeeeeeeeeeeeeeeeeeeee
eee0077777700eeeeee007777700eeeeeeeee0770eeeeeeeeee007777700eeeeeeee0770eeeeeeee0777700ee07777770eeee0770eeeeeeeeeeeeeeeeeeeeeee
eeeee000000eeeeeeeeee00000eeeeeeeeeeee00eeeeeeeeeeeee00000eeeeeeeeeee00eeeeeeeeee0000eeee00000000eeeee00eeeeeeeeeeeeeeeeeeeeeeee
eeeee0000eee0eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00eeeeeeee
eeee0777700070eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee007777700eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0770eeeeeee
eee07700007770eeeee00000eeeeeee00ee00e0000eeeeeee00000eeeeeeeeeeee07700000770eee00000eee0000eeeee00000eeeeee00ee000ee0770eeeeeee
ee0700eeee0770eeee07777700eeee0770077077770eeeee0777770eeeeeeeeee0770eeeee0770e0777770e077770eee0777770eee0077007770e0770eeeeeee
e0770eeeeee070eee0700007770ee077777777007770eee070007770eeeeeeeee0770eeeee0770ee07770eee0700eee070007770e07777770770e0770eeeeeee
e070eeeeeeee0eee0770eee0770eee077000770e0770ee070eee0770eeeeeeee0770eeeeeee0770ee0770eee070eee070eee0770ee007700e00ee0770eeeeeee
0770eeeee000000e0770eee0770eee0770e0770e0770e077000007770eeeeeee0770eeeeeee0770ee0770eee070ee077000007770ee0770eeeeee0770eeeeeee
0770eeee07777770e00e0007770eee0770e0770e0770e077777777770eeeeeee0770eeeeeee0770eee0770e070eee077777777770ee0770eeeeee070eeeeeeee
0770eeeee007700eee007770770eee0770e0770e0770e07700000000eeeeeeee0770eeeeeee0770eee0770e070eee07700000000eee0770eeeeee070eeeeeeee
0770eeeeee0770eee0777000770eee0770e0770e0770e0770eeeeee0eeeeeeee0770eeeeeee0770eee0770070eeee0770eeeeee0eee0770eeeeee070eeeeeeee
0770eeeeee0770ee07700ee0770eee0770e0770e0770e0770eeeee070eeeeeee0770eeeeeee0770eeee077070eeee0770eeeee070ee0770eeeeee070eeeeeeee
e0770eeeee0770ee0770eee0770eee0770e0770e0770e07770eeee070eeeeeeee0770eeeee0770eeeee077070eeee07770eeee070ee0770eeeeeee0eeeeeeeee
e07770eeee0770ee0770eee07700ee0770e0770e0770ee0777000070eeeeeeeee0770eeeee0770eeeeee0770eeeeee0777000070eee0770eeeeeee00eeeeeeee
ee077700007770ee0777000777070e0770e0770e0770eee077777770eeeeeeeeee07700000770eeeeeee0770eeeeeee077777770ee007700eeeee0770eeeeeee
eee0077777700eeee07777707770e0777707770077770eee0777700eeeeeeeeeeee007777700eeeeeeee0770eeeeeeee0777700ee07777770eeee0770eeeeeee
eeeee000000eeeeeee00000e000ee000000000ee0000eeeee0000eeeeeeeeeeeeeeee00000eeeeeeeeeee00eeeeeeeeee0000eeee00000000eeeee00eeeeeeee
eeeee00000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
eee007777700eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
ee07700000770eee00000eee0000eeeee00000eeeeee00ee000ee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
e0770eeeee0770e0777770e077770eee0777770eee0077007770e0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
e0770eeeee0770ee07770eee0700eee070007770e07777770770e0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
0770eeeeeee0770ee0770eee070eee070eee0770ee007700e00ee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
0770eeeeeee0770ee0770eee070ee077000007770ee0770eeeeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
0770eeeeeee0770eee0770e070eee077777777770ee0770eeeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
0770eeeeeee0770eee0770e070eee07700000000eee0770eeeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
0770eeeeeee0770eee0770070eeee0770eeeeee0eee0770eeeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
0770eeeeeee0770eeee077070eeee0770eeeee070ee0770eeeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
e0770eeeee0770eeeee077070eeee07770eeee070ee0770eeeeeee0eeeeeeeee0000000000000000000000000000000000000000000000000000000000000000
e0770eeeee0770eeeeee0770eeeeee0777000070eee0770eeeeeee00eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
ee07700000770eeeeeee0770eeeeeee077777770ee007700eeeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
eee007777700eeeeeeee0770eeeeeeee0777700ee07777770eeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000
eeeee00000eeeeeeeeeee00eeeeeeeeee0000eeee00000000eeeee00eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
eeeeeeeeeeeeeeeeeeeee00000eeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeeeeeeeeeeeeee007777700eeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e00000eeeeeeeeeeee07700000770eee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0777770eeeeeeeeee0770eeeee0770e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70007770eeeeeeeee0770eeeee0770ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eee0770eeeeeeee0770eeeeeee0770e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000007770eeeeeee0770eeeeeee0770e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
777777770eeeeeee0770eeeeeee0770e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee0770eeeeeee0770e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eeeeee0eeeeeeee0770eeeeeee0770e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eeeee070eeeeeee0770eeeeeee0770e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70eeee070eeeeeeee0770eeeee0770ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77000070eeeeeeeee0770eeeee0770ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777770eeeeeeeeee07700000770eee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0777700eeeeeeeeeeee007777700eeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e0000eeeeeeeeeeeeeeee00000eeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeee00eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000ee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7770e0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0770e0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
e00ee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee070eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeee0eeeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeee00eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eeee0770eeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eeeee00eeeeeeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
