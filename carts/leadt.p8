pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
local actors={}
local particles={}
local cam
local time_t=0

function v_add(a,b,scale)
	scale=scale or 1
	a[1]+=scale*b[1]
	a[2]+=scale*b[2]
end

function make_actor(x,y)
 local angle=rnd()
	local a={
		pos={x,y},
		fwd={cos(angle),sin(angle)},
		acc=0.4,
		update=function(self)
			v_add(self.pos,self.fwd,self.acc)
		end,
		draw=function(self)
			local x,y=cam:project(self.pos)
			spr(1,x,y)
		end
	}
	add(actors,a)
end

function make_laser(a)
	
end

function make_cam()
	return {
		project=function(self,v)
			return 64+v[1],64-v[2]
		end
	}
end

function forall(a,fn)
	for _,a in pairs(a) do
		a[fn](a)
	end	
end

function _update()
	forall(actors,"update")
	if btnp(4) then
		make_actor(rnd(128)-64,rnd(128)-64)
	end
end

function _draw()
	cls()
	forall(actors,"draw")
end

function _init()
 cam=make_cam()
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000cccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000333b7300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700033333b730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
